(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{331:function(t,e,_){"use strict";_.r(e);var v=_(13),a=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"注销端点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注销端点"}},[t._v("#")]),t._v(" 注销端点")]),t._v(" "),e("p",[t._v("要处理注销，需要执行注销端点：")]),t._v(" "),e("ul",[e("li",[t._v("通过从会话中删除 pac4j profile 实现本地注销")]),t._v(" "),e("li",[t._v("通过调用认证提供者注销端点实现中央注销。这是单点注销（Single-Log-Out=SLO）过程。")])]),t._v(" "),e("h2",{attrs:{id:"_1-行为"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-行为"}},[t._v("#")]),t._v(" 1）行为")]),t._v(" "),e("p",[t._v("默认情况下，它依赖于具有以下行为的 "),e("code",[t._v("DefaultLogoutLogic")]),t._v("：")]),t._v(" "),e("ul",[e("li",[t._v("如果 "),e("code",[t._v("localLogout")]),t._v(" 属性为 "),e("code",[t._v("true")]),t._v("，"),e("em",[t._v("pac4j")]),t._v(" profile 将从 web 会话中删除（如果 "),e("code",[t._v("destroySession")]),t._v(" 属性为 "),e("code",[t._v("true")]),t._v(" 则 web 会话将被销毁）")]),t._v(" "),e("li",[t._v("如果注销后操作与 "),e("code",[t._v("logoutUrlPattern")]),t._v(" 匹配，则将其计算为 "),e("code",[t._v("url")]),t._v(" 请求参数的重定向；如果定义了默认 url，则将它计算为 "),e("code",[t._v("defaultUrl")]),t._v("；否则将其作为空白页")]),t._v(" "),e("li",[t._v("如果 "),e("code",[t._v("centralLogout")]),t._v(" 属性为 "),e("code",[t._v("true")]),t._v("，则会将用户重定向到认证提供者进行中央注销，然后可选地重定向到注销后重定向 URL（如果认证提供者支持并且是绝对 URL）。如果未定义中央注销，则直接执行注销后操作。")])]),t._v(" "),e("h2",{attrs:{id:"_2-选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-选项"}},[t._v("#")]),t._v(" 2）选项")]),t._v(" "),e("p",[t._v("以下选项可用于注销端点。它们可以通过 "),e("code",[t._v("setter")]),t._v("、构造函数、"),e("code",[t._v("servlet")]),t._v(" 参数等来定义，具体取决于 "),e("em",[t._v("pac4j")]),t._v(" 的实现：")]),t._v(" "),e("h3",{attrs:{id:"a-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-config"}},[t._v("#")]),t._v(" a）"),e("code",[t._v("config")])]),t._v(" "),e("p",[t._v("参阅"),e("RouterLink",{attrs:{to:"/config.html"}},[t._v("安全配置")])],1),t._v(" "),e("h3",{attrs:{id:"b-defaulturl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b-defaulturl"}},[t._v("#")]),t._v(" b）"),e("code",[t._v("defaultUrl")])]),t._v(" "),e("p",[t._v("如果未提供 "),e("code",[t._v("url")]),t._v(" 请求参数或 "),e("code",[t._v("url")]),t._v(" 与 "),e("code",[t._v("logoutUrlPattern")]),t._v(" 不匹配，则为默认的注销 URL。它是一个可选参数，默认情况下未定义。")]),t._v(" "),e("h3",{attrs:{id:"c-logouturlpattern"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-logouturlpattern"}},[t._v("#")]),t._v(" c）"),e("code",[t._v("logoutUrlPattern")])]),t._v(" "),e("p",[e("code",[t._v("url")]),t._v(" 参数必须匹配的注销 URL 模式。它是一个可选参数，默认情况下只允许相对 URL。")]),t._v(" "),e("h3",{attrs:{id:"d-locallogout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#d-locallogout"}},[t._v("#")]),t._v(" d）"),e("code",[t._v("localLogout")])]),t._v(" "),e("p",[t._v("它指示是否必须执行本地注销。它是一个可选参数，默认为 "),e("code",[t._v("true")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"e-destroysession"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#e-destroysession"}},[t._v("#")]),t._v(" e）"),e("code",[t._v("destroySession")])]),t._v(" "),e("p",[t._v("它定义了在本地注销期间是否必须销毁 web 会话。它是一个可选参数，默认为 "),e("code",[t._v("false")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"f-centrallogout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#f-centrallogout"}},[t._v("#")]),t._v(" f）"),e("code",[t._v("centralLogout")])]),t._v(" "),e("p",[t._v("它定义是否必须执行中央注销。它是一个可选参数，默认为 "),e("code",[t._v("false")]),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"_3-来自认证提供者的注销请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-来自认证提供者的注销请求"}},[t._v("#")]),t._v(" 3）来自认证提供者的注销请求")]),t._v(" "),e("p",[t._v("在中央注销的情况下，认证提供者处发生的 SLO（单点登出）过程将向应用程序发送注销请求。然而，这些注销请求将由"),e("RouterLink",{attrs:{to:"/callback-endpoint.html"}},[t._v("回调端点")]),t._v("而不是此注销端点接收。")],1),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.pac4j.org/docs/logout-endpoint.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=a.exports}}]);