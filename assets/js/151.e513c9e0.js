(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{443:function(t,e,v){"use strict";v.r(e);var _=v(13),a=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"安全过滤器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全过滤器"}},[t._v("#")]),t._v(" 安全过滤器")]),t._v(" "),e("p",[t._v("为了保护 URL，需要一个安全过滤器来定义应用的认证/授权机制。")]),t._v(" "),e("h2",{attrs:{id:"_1-行为"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-行为"}},[t._v("#")]),t._v(" 1）行为")]),t._v(" "),e("p",[t._v("默认情况下，它依赖于具有以下行为的 "),e("code",[t._v("DefaultSecurityLogic")]),t._v("：")]),t._v(" "),e("ul",[e("li",[t._v("如果 HTTP 请求与匹配器配置匹配（或未定义匹配器），则应用安全性。否则，将自动授予用户访问权限。")]),t._v(" "),e("li",[t._v("首先，如果用户未经过认证（没有数据 "),e("em",[t._v("profile")]),t._v("），并且在 clients 参数中定义了一些客户端，则尝试直接客户端登录。")]),t._v(" "),e("li",[t._v("然后，如果用户具有配置文件，则根据授权者配置检查授权。如果授权有效，则授予用户访问权限。否则，将显示 "),e("code",[t._v("403")]),t._v(" 错误页面。")]),t._v(" "),e("li",[t._v("最后，如果用户没有经过认证（没有数据 "),e("em",[t._v("profile")]),t._v("），如果第一个定义的客户端是客户端配置中的间接客户机，则会将其重定向到适当的认证提供者。否则，将显示 "),e("code",[t._v("401")]),t._v(" 错误页面。")])]),t._v(" "),e("p",[t._v("设置 "),e("code",[t._v("401")]),t._v(" HTTP 状态代码后，如果 "),e("code",[t._v("WWW-Authenticate")]),t._v(" 头不存在（符合 HTTP 规范），则会添加一个值为："),e("code",[t._v('Bearer ream="pac4j"')]),t._v(" 的 "),e("code",[t._v("WWW-Authenticate")]),t._v(" 头。如果 "),e("code",[t._v("WWW-Authenticate")]),t._v(" 头不存在，则可以通过以下设置使用 "),e("code",[t._v("403")]),t._v(" HTTP状态代码："),e("code",[t._v("HttpActionHelper.setAlwaysUse401ForUnauthenticated(false);")]),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"_2-选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-选项"}},[t._v("#")]),t._v(" 2）选项")]),t._v(" "),e("p",[t._v("以下选项可用于安全过滤器。它们可以通过 "),e("code",[t._v("setter")]),t._v("、构造函数、"),e("code",[t._v("servlet")]),t._v(" 参数等来定义，具体取决于 "),e("em",[t._v("pac4j")]),t._v(" 的实现：")]),t._v(" "),e("h3",{attrs:{id:"a-confg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-confg"}},[t._v("#")]),t._v(" a）"),e("code",[t._v("confg")])]),t._v(" "),e("p",[t._v("参阅"),e("RouterLink",{attrs:{to:"/v5.0/config.html"}},[t._v("安全配置")])],1),t._v(" "),e("h3",{attrs:{id:"b-clients"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b-clients"}},[t._v("#")]),t._v(" b）"),e("code",[t._v("clients")])]),t._v(" "),e("p",[t._v("这是用于认证的"),e("RouterLink",{attrs:{to:"/v5.0/clients.html"}},[t._v("客户端")]),t._v("名称列表（用逗号分隔）的字符串。它是一个可选参数。")],1),t._v(" "),e("p",[t._v("在所有情况下，此过滤器都要求用户经过认证。因此，如果客户端为空或未定义，则用户必须事先经过认证，否则返回 "),e("code",[t._v("401")]),t._v(" 错误。")]),t._v(" "),e("p",[t._v("通过使用请求参数："),e("code",[t._v("force_client")]),t._v("，可以在过滤器的所有已定义客户端中选择特定客户端。")]),t._v(" "),e("h3",{attrs:{id:"c-authorizers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-authorizers"}},[t._v("#")]),t._v(" c）"),e("code",[t._v("authorizers")])]),t._v(" "),e("p",[t._v("这是一个用于检查授权的"),e("RouterLink",{attrs:{to:"/v5.0/authorizer.html"}},[t._v("授权器")]),t._v("名称列表字符串（用逗号分隔）。它是一个可选参数。")],1),t._v(" "),e("p",[t._v("如果授权器为空或未定义，则将对 web 应用程序应用默认授权器："),e("code",[t._v("csrfCheck")]),t._v("（至少定义了一个 "),e("code",[t._v("IndirectClient")]),t._v("），但不适用于 web 服务。如果未配置 "),e("code",[t._v("AnonymousClient")]),t._v("，则默认情况下也会应用 "),e("code",[t._v("isAuthenticated")]),t._v(" 授权器。")]),t._v(" "),e("p",[t._v("你还可以使用"),e("RouterLink",{attrs:{to:"/v5.0/authorizer.html#默认授权器名称"}},[t._v("开箱即用的授权器")]),t._v("，无需在安全配置中定义即可使用。以“+”开头 "),e("code",[t._v("authorizers")]),t._v(" 字符串，将其他授权器添加到默认授权器中，或不替换它们。")],1),t._v(" "),e("h3",{attrs:{id:"d-matchers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#d-matchers"}},[t._v("#")]),t._v(" d）"),e("code",[t._v("matchers")])]),t._v(" "),e("p",[t._v("这是请求必须满足的"),e("RouterLink",{attrs:{to:"/v5.0/matcher.html"}},[t._v("匹配器")]),t._v("名称列表（用逗号分隔），以检查认证/授权。它是一个可选参数。")],1),t._v(" "),e("p",[t._v("如果 "),e("code",[t._v("matchers")]),t._v(" 为空或未定义，则默认情况下会匹配 "),e("code",[t._v("securityHeaders")]),t._v("，并且 "),e("code",[t._v("csrfToken")]),t._v(" 仅适用于 web 应用程序（至少定义了一个 "),e("code",[t._v("IndirectClient")]),t._v("）。")]),t._v(" "),e("p",[t._v("你还可以使用"),e("RouterLink",{attrs:{to:"/v5.0/matcher.html#_3-默认匹配器"}},[t._v("开箱即用的匹配器")]),t._v("，而无需在安全配置中定义它们。以“+”开头 "),e("code",[t._v("matchers")]),t._v(" 字符串，将其他匹配器添加到默认匹配器中，或不替换它们。")],1),t._v(" "),e("h2",{attrs:{id:"_3-高级选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-高级选项"}},[t._v("#")]),t._v(" 3）高级选项")]),t._v(" "),e("p",[t._v("高级选项可设置为：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Config")]),t._v(" 级别")]),t._v(" "),e("li",[t._v("直接在安全过滤器级别通过 "),e("code",[t._v("setter")]),t._v("、构造函数、"),e("code",[t._v("servlet")]),t._v(" 参数等……取决于 "),e("em",[t._v("pac4j")]),t._v(" 实现：")])]),t._v(" "),e("h3",{attrs:{id:"a-sessionstore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-sessionstore"}},[t._v("#")]),t._v(" a）sessionStore")]),t._v(" "),e("p",[t._v("你可以定义一个特定的 "),e("RouterLink",{attrs:{to:"/v5.0/session-store.html"}},[t._v("SessionStore")]),t._v(" 来替代 "),e("em",[t._v("pac4j")]),t._v(" 默认实现。")],1),t._v(" "),e("h3",{attrs:{id:"b-httpactionadapter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b-httpactionadapter"}},[t._v("#")]),t._v(" b）httpActionAdapter")]),t._v(" "),e("p",[t._v("你可以定义一个特定的 "),e("RouterLink",{attrs:{to:"/v5.0/http-action-adapter.html"}},[t._v("HttpActionAdapter")]),t._v(" 来替代 "),e("em",[t._v("pac4j")]),t._v(" 默认实现。")],1),t._v(" "),e("h3",{attrs:{id:"c-logoutlogic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-logoutlogic"}},[t._v("#")]),t._v(" c）logoutLogic")]),t._v(" "),e("p",[t._v("你可以定义特定的 "),e("code",[t._v("SecurityLogic")]),t._v(" 来替代默认的 "),e("code",[t._v("DefaultSecurityLogic")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"d-webcontextfactory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#d-webcontextfactory"}},[t._v("#")]),t._v(" d）webContextFactory")]),t._v(" "),e("p",[t._v("你可以定义特定的 "),e("RouterLink",{attrs:{to:"/v5.0/web-context.html"}},[t._v("WebContextFactory")]),t._v("，来替代 "),e("em",[t._v("pac4j")]),t._v(" 默认实现。")],1),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.pac4j.org/5.0.x/docs/security-filter.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=a.exports}}]);