(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{369:function(e,r,o){"use strict";o.r(r);var a=o(13),t=Object(a.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"会话存储"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#会话存储"}},[e._v("#")]),e._v(" 会话存储")]),e._v(" "),r("p",[r("RouterLink",{attrs:{to:"/v4.0/web-context.html"}},[e._v("WebContext")]),e._v(" 与 HTTP 请求和响应相关。")],1),e._v(" "),r("p",[e._v("为了专门处理会话，它依赖于一个 "),r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/context/session/SessionStore.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SessionStore"),r("OutboundLink")],1),e._v("，它可以通过 "),r("code",[e._v("getSessionStore")]),e._v(" 方法获得。")]),e._v(" "),r("p",[e._v("它有以下方法：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("getOrCreateSessionId")]),e._v("：获取或创建会话标识符，并在必要时使用它初始化会话")]),e._v(" "),r("li",[r("code",[e._v("get")]),e._v("：从会话中获取属性")]),e._v(" "),r("li",[r("code",[e._v("set")]),e._v("：设置会话中的属性")]),e._v(" "),r("li",[r("code",[e._v("destroySession")]),e._v("：销毁基础 web 会话")]),e._v(" "),r("li",[r("code",[e._v("getTrackableSession")]),e._v("：将本地会话作为可跟踪对象（用于后台通道注销）")]),e._v(" "),r("li",[r("code",[e._v("buildFromTrackableSession")]),e._v("：从可跟踪会话构建新的会话存储（用于后台通道注销）")]),e._v(" "),r("li",[r("code",[e._v("renewSession")]),e._v("：通过将所有数据复制到新会话来更新本地会话。")])]),e._v(" "),r("p",[e._v("例如，"),r("code",[e._v("JEEContext")]),e._v(" 当前使用依赖 JEE 会话的 "),r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-jakartaee/src/main/java/org/pac4j/jee/context/session/JEESessionStore.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("JEESessionStore"),r("OutboundLink")],1),e._v("。在 Play 中，我们有一个特定的基于缓存的 "),r("a",{attrs:{href:"https://github.com/pac4j/play-pac4j/blob/master/shared/src/main/java/org/pac4j/play/store/PlayCacheSessionStore.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("PlayCacheSessionStore"),r("OutboundLink")],1),e._v("，在 Knox 中也有一个基于 cookie 的 "),r("code",[e._v("KnoxSessionStore")]),e._v("。")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/engine/strategy/ProfileStorageDecision.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("ProfileStorageDecision"),r("OutboundLink")],1),e._v(" 定义了与配置文件相关的决策，即我们是否必须从中读取并将其保存到 web 会话中。它由 "),r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/engine/DefaultSecurityLogic.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultSecurityLogic"),r("OutboundLink")],1),e._v(" 使用：")]),e._v(" "),r("ul",[r("li",[e._v("默认情况下，将设置 "),r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/engine/strategy/DefaultProfileStorageDecision.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultProfileStorageDecision"),r("OutboundLink")],1),e._v("，这适用于仅使用间接客户端或直接客户端的 web 应用程序")]),e._v(" "),r("li",[e._v("对于同时使用间接和直接客户端以及混合认证的 web 应用程序，应使用 "),r("a",{attrs:{href:"https://github.com/pac4j/pac4j/blob/master/pac4j-core/src/main/java/org/pac4j/core/engine/strategy/AlwaysUseSessionProfileStorageDecision.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("AlwaysUseSessionProfileStorageDecision"),r("OutboundLink")],1),e._v("。")])]),e._v(" "),r("blockquote",[r("p",[r("a",{attrs:{href:"https://www.pac4j.org/4.0.x/docs/session-store.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("原文链接"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=t.exports}}]);